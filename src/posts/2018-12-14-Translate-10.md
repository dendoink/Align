---
name: 2018-12-14-Translate-10
layout: post
title: '[è¯‘]Devtools tips day10 :custom formatters'
date: 2018-12-14
categories: Site
tags: [Tutorial, Chrome, Tools]
coverimg: 'http://ww1.sinaimg.cn/large/88b26e1cgy1fy6agsqgssj23zq2i2qv5.jpg'
info: 'æœ¬æ–‡æ˜¯ä½œè€… [Tomek SuÅ‚kowski] å‘å¸ƒåœ¨ [medium]ä¸Šçš„ä¸€ä¸ªç³»åˆ—çš„ç¬¬10ç¯‡ï¼Œè¿™ä¸ªç³»åˆ—ä¸€å…±æœ‰24ç¯‡'
---

> æœ¬æ–‡[æ˜é‡‘åŒæ­¥è¿æ¥](https://juejin.im/post/5c1365a9e51d452f8e6034cb)

### ç‰¹åˆ«å£°æ˜

æœ¬æ–‡æ˜¯ä½œè€… [Tomek SuÅ‚kowski](https://twitter.com/sulco) å‘å¸ƒåœ¨ [medium](https://medium.com/@tomsu) ä¸Šçš„ä¸€ä¸ªç³»åˆ—ã€‚æ®ä½œè€…é€éœ²ä¸€å…±æœ‰ 24 ç¯‡ï¼Œä¸€ç›´æ›´æ–°åˆ° 12 æœˆ 24 æ—¥<br>
ç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚<br>

è¯‘è€…åœ¨ç¿»è¯‘å‰å·²ç»å’Œä½œè€…æ²Ÿé€šå¾—åˆ°äº†ç¿»è¯‘æ•´ä¸ªç³»åˆ—çš„è®¸å¯ã€‚<br>
ä¸ºäº†ä¸å½±å“å¤§å®¶é˜…è¯»ï¼Œ[è®¸å¯çš„è®°å½•åœ¨è¿™é‡Œ](https://juejin.im/post/5c09a80151882521c81168a2)<br>

**ä½œè€…åœ¨Twitterä¸Šæ¨èæˆ‘ä»¬çš„ä¸­æ–‡ç¿»è¯‘å•¦~~æ–‡æœ«é™„å›¾**<br>

### æ­£æ–‡

åœ¨é©¬ä¸Šå°±è¦è¿æ¥å‡æœŸçš„è¿™ 24 å¤©é‡Œï¼Œæˆ‘å°†ä¼šå‘å¸ƒä¸€ç³»åˆ—çŸ­ç¯‡çš„æ–‡ç« ï¼Œå…³äºå¦‚ä½•æ›´åŠ æœ‰æ„æ€çš„ä½¿ç”¨å¼€å‘å·¥å…·ï¼Œ[æ˜¨å¤©](https://juejin.im/post/5c11809ef265da61141c76f1)æˆ‘ä»¬æµ‹é‡äº†ä¸€ä¸‹æ—¶é—´ ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠ...

### 28. `Custom Formatters` è‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨

`DevTools` çš„ `console` é»˜è®¤å¯¹ä½ çš„å¯¹è±¡çš„è½¬åŒ–çš„æ–¹å¼åœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹éƒ½æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ æœŸæœ›ä¸ä¼—ä¸åŒã€‚å¾ˆå¹¸è¿çš„æ˜¯ï¼Œå› ä¸ºé»˜è®¤çš„æ–¹å¼å¾ˆ...é»˜è®¤ - æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„è¾“å‡ºå¯¹è±¡çš„æ–¹å¼ã€‚åšè¿™ä¸ªäº‹æƒ…çš„å‡½æ•°è¢«ç§°ä¸º `Custom Formatter` åœ¨æˆ‘ä»¬å†™ä¸€ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `DevTools` çš„è®¾ç½® (åœ¨ `DevTools` çš„ `â‹®` ä¸‹æ‹‰æ¡†æ‰¾åˆ°è®¾ç½®ï¼Œæˆ–è€…æŒ‰ä¸‹ `F1` ) ä¸­æŠŠå¯¹åº”çš„è®¾ç½®æ‰“å¼€:

![](https://user-gold-cdn.xitu.io/2018/12/14/167abc4fc44e3add?w=2000&h=1396&f=png&s=336889)

æ‰€ä»¥ï¼Œè¿™æ ·çš„ `formatter` åº”è¯¥é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ å®ƒæ˜¯ä¸€ä¸ªæœ€å¤šæœ‰ä¸‰ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼š

- `header` â€”â€Š å¤„ç†å¦‚ä½•å±•ç¤ºåœ¨ `console` çš„æ—¥å¿—ä¸­çš„ä¸»è¦éƒ¨åˆ†ã€‚
- `hasbody` â€”â€Š å¦‚æœä½ æƒ³æ˜¾ç¤ºä¸€ä¸ªç”¨æ¥å±•å¼€å¯¹è±¡çš„`â–¶` ç®­å¤´ï¼Œè¿”å› `true`
- `body` - å®šä¹‰å°†ä¼šè¢«æ˜¾ç¤ºåœ¨å±•å¼€éƒ¨åˆ†çš„å†…å®¹ä¸­ã€‚

è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸ªåŸºç¡€çš„ è‡ªå®šä¹‰`formatter`

![](https://user-gold-cdn.xitu.io/2018/12/14/167abc4fbd4b892f?w=1092&h=610&f=png&s=48708)

> æˆ‘ç§»é™¤äº†å¾ªç¯çš„ç»“æ„çš„é”™è¯¯å¤„ç†ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´åŠ ç®€æ´

`header` æ–¹æ³•è¿”å›äº†ä¸€ä¸ª [JsonML](http://www.jsonml.org/) (è¯‘è€…æ³¨ï¼š `JsonML`: `JSON Markup Language` `JSON` æ ‡è®°è¯­è¨€)æ•°ç»„ï¼Œç”±è¿™äº›ç»„æˆï¼š

1. æ ‡ç­¾å
2. å±æ€§å¯¹è±¡
3. å†…å®¹ (æ–‡æœ¬å€¼æˆ–è€…å…¶ä»–å…ƒç´ )

(å¦‚æœè¿™ä¸ªçœ‹èµ·æ¥å¾ˆçœ¼ç†Ÿçš„è¯ï¼Œé‚£å¯èƒ½æ˜¯å› ä¸ºä½ ä¹‹å‰å†™è¿‡ä¸€äº›[React ä»£ç ](https://reactjs.org/docs/react-without-jsx.html) :D)

åœ¨è¾“å‡ºçš„æ—¶å€™ï¼Œè¿™ä¸ªç®€å•çš„ `formatter` å¯¹äºæ¯ä¸€å±‚åµŒå¥—ï¼Œç›´æ¥ä»¥ 7 ä¸ªç©ºæ ¼çš„ç¼©è¿›æ‰“å°è¿™ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬çš„è¾“å‡ºç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š

![](https://user-gold-cdn.xitu.io/2018/12/14/167abc4fc493cb88?w=884&h=654&f=gif&s=941282)

### 29.è‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨çš„åº”ç”¨å®è·µ

ç°åœ¨æœ‰å¥½å‡ ç§ `custom formatter` (è‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨)ä¾›ä½ ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼šä½ å¯ä»¥åœ¨è¿™ä¸ª[immutable-devtools ](https://github.com/andrewdavey/immutable-devtools)ä»“åº“ä¸­æ‰¾åˆ°å¯¹äº[Immutable.js](https://facebook.github.io/immutable-js/) ç»“æ„çš„å®Œç¾å±•ç¤ºã€‚ä½†æ˜¯ä½ åŒæ ·å¯ä»¥è‡ªå·±é€ ä¸€ä¸ªã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæ¯å½“ä½ æœ‰ä¸€äº›ä¸å¯»å¸¸çš„å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ–è€…å¤§é‡çš„æ—¥å¿—(æœ€å¥½é¿å…è¿™æ ·çš„æƒ…å†µï¼Œä½†æ˜¯æœ‰æ—¶å€™å¾ˆæœ‰ç”¨)è€Œä¸”ä½ æƒ³ä»ä¸­åšåŒºåˆ†çš„æ—¶å€™ï¼Œä½ å¯ä»¥é‡‡ç”¨ä¸€ä¸ª `custom formatter` (è‡ªå®šä¹‰æ ¼å¼è½¬æ¢å™¨)æ¥å¤„ç†ã€‚

ä¸€ä¸ªå¾ˆå®ç”¨çš„çªé—¨å°±æ˜¯ï¼Œç›´æ¥å°†ä½ ä¸å…³å¿ƒï¼Œä¸éœ€è¦åŒºåˆ«å¯¹å¾…çš„å¯¹è±¡è¿‡æ»¤å‡ºæ¥ï¼Œè¿™ç§æƒ…å†µï¼Œç›´æ¥åœ¨ `header` æ–¹æ³•é‡Œé¢ `return null`ã€‚è®© `DevTools` ä½¿ç”¨é»˜è®¤çš„æ ¼å¼åŒ–æ–¹å¼æ¥å¤„ç†è¿™äº›å€¼ã€‚

å¥½äº†ï¼Œæ’‡å¼€å®ç”¨æ€§ï¼Œä½ åŒæ ·å¯ä»¥åœ¨å®ƒä¸Šé¢æ‰¾ç‚¹ä¹å­ - è¿™å„¿æœ‰ä¸€ä¸ªå…³äº`console` æ–¹æ³•çš„è ¢èŒä¾‹å­ï¼šå®ƒå«åš `console.clown()` å¹¶ä¸”ä»–å°†æ‰“å°å¯¹è±¡è¿›è¡Œè½¬æ¢ï¼Œè€Œä¸”åœ¨å¯¹è±¡å‰é¢åŠ ä¸Šä¸€ä¸ª emoji è¡¨æƒ… ... å¯èƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºå§ï¼Œæˆ‘çŒœ ğŸ˜

![](https://user-gold-cdn.xitu.io/2018/12/14/167abc4fc41415ab?w=1132&h=1754&f=png&s=179986)

> [æºç åœ¨è¿™é‡Œ](https://gist.github.com/sulco/e635a7511d5ff17d44fe9bb2ab8b3cc6)ä¸ºäº†æ–¹ä¾¿å¤§å®¶å°è¯•ï¼Œæºç è´´åœ¨ä¸‹é¢ï¼š

```javascript
window.devtoolsFormatters = [{
    header: function(obj){
      if (!obj.__clown) {
        return null;
      }
      delete obj.__clown;
      const style = `
        color: red;
        border: dotted 2px gray;
        border-radius: 4px;
        padding: 5px;
      `
      const content = `ğŸ¤¡ ${JSON.stringify(obj, null, 2)}`;

      try {
        return ['div', {style}, content]
      } catch (err) { // for circular structures
        return null;  // use the default formatter
      }
    },
    hasBody: function(){
        return false;
    }
}]

console.clown = function (obj) {
  console.log({...obj, __clown: true});
}

console.log({message: 'hello!'});   // normal log
console.clown({message: 'hello!'}); // a silly log
```

æ­£å¦‚ä½ æ‰€è§æˆ‘æ­£åœ¨ä½¿ç”¨ `console.clown` æ–¹æ³•æ¥ç»™æ‰“å°çš„å¯¹è±¡æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥å°†å®ƒåŒºåˆ†å‡ºæ¥å¹¶ä¸”åœ¨ `formatter` (è½¬æ¢å™¨) ä¸­å¯¹å®ƒè¿›è¡ŒåŒºåˆ«å¯¹å¾…ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†ç°å®çš„æ¡ˆä¾‹ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·ï¼šæ¯”å¦‚æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯æŸä¸€ä¸ªç‰¹æ®Šç±»çš„å®ä¾‹ç­‰ç­‰ã€‚

Ohï¼Œ`clown` æ‰“å°å‡ºæ¥äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ åœ¨ä¸‹é¢ï¼š

![](https://user-gold-cdn.xitu.io/2018/12/14/167abc4fbd5ae3f6?w=896&h=450&f=png&s=42023)


ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œ~

æƒ¯ä¾‹ï¼š å¦‚æœä½ ä»è¿™é‡Œå­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿

â†’ ä½ å¯ä»¥ç‚¹ä¸ªèµå†èµ°å˜›~<br>
â†’ å…³æ³¨æˆ‘ï¼š[Twitterï¼šTomek SuÅ‚kowski](https://twitter.com/sulco)

### å…¶ä»–ç³»åˆ—

å…¶ä»–æ­¤ç³»åˆ—çš„æ–‡ç« ï¼Œé©¬ä¸Šå°±ä¼šç¿»è¯‘å‡ºæ¥ï¼Œåˆ°æ—¶ä¼šè´´å‡ºå¯¹åº”çš„é“¾æ¥åœ¨æ­¤å¤„ã€‚

- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬ä¸€å¤©ï¼šconsole ä¸­çš„'\$'](https://juejin.im/post/5c09a80151882521c81168a2)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬äºŒå¤©ï¼šcopying & saving](https://juejin.im/post/5c0a0d5ff265da61117a1c75)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬ä¸‰å¤©ï¼šconsole methods](https://juejin.im/post/5c0a8ce6f265da6141716329)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬å››å¤©ï¼šthe Elements panelï¼ˆå…ƒç´ é¢æ¿ï¼‰](https://juejin.im/post/5c0d2d85f265da612061a62f)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬äº”å¤©ï¼šconsole çš„ log ä¸­,è®©äººç–‘æƒ‘çš„æ¡ˆä¾‹](https://juejin.im/post/5c0edc31f265da611c26d08a)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬å…­å¤©ï¼šcommand èœå•](https://juejin.im/post/5c0ee12551882545e24ef291)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬ä¸ƒå¤©ï¼šå¼‚æ­¥ consle çš„è¶£å‘³å°çªé—¨](https://juejin.im/post/5c0fdfc46fb9a049b13e0d82)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬å…«å¤©ï¼šColor pickerï¼ˆé¢œè‰²é€‰æ‹©å™¨ï¼‰](https://juejin.im/post/5c10d9d1f265da6118019028)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬ä¹å¤©ï¼šç»™ console è®¡æ—¶](https://juejin.im/post/5c11809ef265da61141c76f1)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬åå¤©ï¼šcustom formattersï¼ˆè‡ªå®šä¹‰æ ¼å¼è½¬æ¢å™¨ï¼‰](https://juejin.im/post/5c1365a9e51d452f8e6034cb)
- [ã€è¯‘ã€‘ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•å·¥å…·æŠ€å·§ ç¬¬åä¸€å¤©ï¼šstyle editors continuedï¼ˆæ ·å¼ç¼–è¾‘å™¨åç»­ï¼‰](https://juejin.im/post/5c137ac3f265da617974b675)

### å†™åœ¨æœ€å

å¦‚æœä½ å¯¹æˆ‘çš„ç¿»è¯‘è¡¨ç¤ºè‚¯å®šï¼Œä¹Ÿå¯ä»¥å…³æ³¨æˆ‘ä¸€æ³¢å“¦~
é¡ºä¾¿æˆ‘çš„å¼€æºé¡¹ç›®ï¼Œæ±‚ä¸€æ³¢ starâ†’ [çœ‹è¿™é‡Œ, ç¾ä¸½çš„åšå®¢ç³»ç»Ÿ](https://github.com/DendiSe7enGitHub/vue-blog-generater)

### ä½œè€…åœ¨Twitterä¸Šæ¨èæˆ‘ä»¬çš„ä¸­æ–‡ç¿»è¯‘å•¦

![](https://user-gold-cdn.xitu.io/2018/12/13/167a5ae8a72ac531?imageView2/2/w/800/q/100)